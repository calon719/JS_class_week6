{"version":3,"sources":["all.js"],"names":["addTicketInputs","document","querySelectorAll","addTicketBtn","querySelector","cardList","searchAreaInput","searchResultNum","ticketData","addEventListener","checkInput","areaFilter","axios","get","then","response","data","renderData","error","console","log","e","preventDefault","checkStatus","forEach","item","inputSpan","getAttribute","descriptionSpan","parseInt","value","setAttribute","length","addTicket","obj","id","push","inputValue","searchResultData","filter","area","str","resultNum","imgUrl","rate","name","description","group","price","innerHTML","textContent"],"mappings":"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","file":"all.js","sourcesContent":["const addTicketInputs = document.querySelectorAll('[data-prop=\"ticketInput\"]');\nconst addTicketBtn = document.querySelector('#addTicketBtn');\nconst cardList = document.querySelector('.ticketList');\nconst searchAreaInput = document.querySelector('.searchRegion');\nconst searchResultNum = document.querySelector('.searchResultNum');\n\nlet ticketData;\n\naddTicketBtn.addEventListener('click', checkInput);\nsearchAreaInput.addEventListener('change', areaFilter);\n\naxios.get('https://raw.githubusercontent.com/hexschool/js-training/main/travelApi.json').then(function (response) {\n  ticketData = response.data.data;\n  renderData(ticketData);\n}).catch(function (error) {\n  console.log(error);\n});\n\nfunction checkInput(e) {\n  e.preventDefault();\n  let checkStatus = true;\n\n  addTicketInputs.forEach(function (item) {\n    let inputSpan = document.querySelector(`span[data-ticketInput=${item.getAttribute('data-ticketInput')}]`);\n    let descriptionSpan = document.querySelector(`span[data-ticketInput=\"descriptionNum\"]`);\n    if (item.getAttribute('data-ticketInput') == 'rate') {\n      // 檢查 套票星級\n      if (parseInt(item.value) > 10 || parseInt(item.value) < 1 || item.value === '') {\n        inputSpan.setAttribute('class', 'text-danger');\n        checkStatus = false;\n      } else {\n        inputSpan.setAttribute('class', 'hidden');\n      };\n    } else if (item.value === '') {\n      // 檢查空值\n      inputSpan.setAttribute('class', 'text-danger');\n      checkStatus = false;\n    } else if (item.getAttribute('data-ticketInput') === 'description') {\n      inputSpan.setAttribute('class', 'hidden');\n      // 檢查字數\n      if (item.value.length > 100) {\n        descriptionSpan.setAttribute('class', 'text-danger')\n        checkStatus = false;\n      } else {\n        descriptionSpan.setAttribute('class', 'hidden');\n      };\n    } else {\n      inputSpan.setAttribute('class', 'hidden');\n    };\n  });\n\n  addTicket(checkStatus);\n};\n\n// 新增資料到 物件 data\nfunction addTicket(checkStatus) {\n  if (checkStatus) {\n    let obj = {};\n\n    addTicketInputs.forEach(function (item) {\n      obj.id = ticketData.length;\n      if (item.getAttribute('type') === 'number') {\n        obj[item.getAttribute('data-ticketInput')] = parseInt(item.value);\n      } else {\n        obj[item.getAttribute('data-ticketInput')] = item.value;\n      };\n      item.value = '';\n    });\n    ticketData.push(obj);\n    areaFilter(); // 更新畫面\n  } else {\n    return;\n  }\n};\n\n// 篩選資料\n// 篩選後會顯示『搜尋資料為 ? 筆』\nfunction areaFilter() {\n  let inputValue = searchAreaInput.value;\n  let searchResultData;\n\n  if (inputValue === '' || inputValue === '全部') {\n    searchResultData = ticketData;\n  } else {\n    searchResultData = ticketData.filter(function (item) {\n      return item.area === inputValue;\n    });\n  };\n  renderData(searchResultData);\n};\n\n// 組裝字串、渲染畫面\nfunction renderData(data) {\n  let str = '';\n  let resultNum = 0;\n  data.forEach(function (item) {\n    resultNum++;\n    str += `\n      <li class=\"flex flex-col bg-white transform hover:scale-105 transition-all duration-700 ease-out rounded relative shadow\">\n        <div class=\"bg-secondary text-white text-xl rounded-r py-2 px-5 absolute -top-5 left-0\">${item.area}</div>\n        <div class=\"h-45 bg-no-repeat bg-cover bg-center rounded-t\"style=\"background-image: url('${item.imgUrl}');\"></div>\n        <div class=\"relative text-primary pt-5 pb-4 px-5 flex flex-grow flex-col justify-between\">\n          <div class=\"absolute bg-primary text-white w-10 text-center rounded-r py-1 -top-4 left-0\">${item.rate}</div>\n          <div>\n            <h2 class=\"font-bold text-2xl pb-1 mb-4 border-b-2\">${item.name}</h2>\n            <p class=\"text-gray-500 mb-8 break-words\">${item.description}</p>\n          </div>\n          <div class=\"flex justify-between items-center\">\n            <p><i class=\"fas fa-exclamation-circle\"></i><span class=\"font-medium\">剩下最後 ${item.group} 組</span></p>\n            <p class=\"font-medium flex items-center\">TWD<span class=\"text-4xl ml-1\">$${item.price}</span></p>\n          </div>\n        </div>\n      </li>\n    `;\n  });\n  cardList.innerHTML = str;\n  searchResultNum.textContent = resultNum;\n};\n"]}